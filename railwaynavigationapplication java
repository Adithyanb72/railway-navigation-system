package com.example.railway;

import com.example.railway.model.Route;
import com.example.railway.model.Station;
import com.example.railway.repo.RouteRepository;
import com.example.railway.repo.StationRepository;
import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;

@SpringBootApplication
public class RailwayNavigationApplication {
    public static void main(String[] args) {
        SpringApplication.run(RailwayNavigationApplication.class, args);
    }

    // Seed some sample data
    @Bean
    CommandLineRunner init(StationRepository stationRepo, RouteRepository routeRepo) {
        return args -> {
            if (stationRepo.count() == 0) {
                Station entrance = stationRepo.save(new Station("Entrance"));
                Station ticket = stationRepo.save(new Station("Ticket Counter"));
                Station p1 = stationRepo.save(new Station("Platform 1"));
                Station p2 = stationRepo.save(new Station("Platform 2"));
                Station restroom = stationRepo.save(new Station("Restroom"));
                Station parking = stationRepo.save(new Station("Parking"));

                routeRepo.save(new Route(entrance, ticket, 50));
                routeRepo.save(new Route(ticket, p1, 120));
                routeRepo.save(new Route(p1, p2, 80));
                routeRepo.save(new Route(p2, restroom, 60));
                routeRepo.save(new Route(entrance, parking, 100));
            }
        };
    }
}
